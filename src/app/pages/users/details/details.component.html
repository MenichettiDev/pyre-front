<!-- Modal de Detalles de Usuario - estructura alineada a user-modal -->
<div class="modal-overlay" *ngIf="visible" role="dialog" aria-modal="true" (click)="onClose()">
  <div class="modal-wrapper">
    <div class="modal-content" (click)="$event.stopPropagation()" [class.open]="visible">
      <!-- Header del Modal -->
      <div class="modal-header">
        <h2 class="modal-title">
          <span class="pi pi-user"></span>
          Detalles del Usuario
        </h2>
        <button #firstFocusable type="button" class="close-btn" (click)="onClose()" aria-label="Cerrar">
          <span class="pi pi-times" aria-hidden="true"></span>
        </button>
      </div>

      <!-- Contenido -->
      <div class="modal-body" *ngIf="userData">
        <div class="details-grid">
          <!-- Información Personal -->
          <div class="section">
            <h3 class="section-title">
              <span class="pi pi-user-edit" aria-hidden="true"></span>
              Información Personal
            </h3>
            <div class="detail-row">
              <label>Nombre Completo:</label>
              <span class="value">{{ getDisplayValue(userData?.nombre || userData?.Nombre) }} {{ getDisplayValue(userData?.apellido || userData?.Apellido, '') }}</span>
            </div>
            <div class="detail-row">
              <label>Legajo:</label>
              <span class="value">{{ getDisplayValue(userData?.legajo || userData?.Legajo) }}</span>
            </div>
            <div class="detail-row">
              <label>DNI:</label>
              <span class="value">{{ getDisplayValue(userData?.dni || userData?.Dni) }}</span>
            </div>
          </div>

          <!-- Información de Contacto -->
          <div class="section">
            <h3 class="section-title">
              <span class="pi pi-at" aria-hidden="true"></span>
              Contacto
            </h3>
            <div class="detail-row">
              <label>Email:</label>
              <span class="value">{{ getDisplayValue(userData?.email || userData?.Email) }}</span>
            </div>
            <div class="detail-row">
              <label>Teléfono:</label>
              <span class="value">{{ getDisplayValue(userData?.telefono || userData?.Telefono) }}</span>
            </div>
          </div>

          <!-- Información del Sistema -->
          <div class="section">
            <h3 class="section-title">
              <span class="pi pi-cog" aria-hidden="true"></span>
              Sistema
            </h3>
            <div class="detail-row">
              <label>Rol:</label>
              <span class="value role-badge" [class]="'role-' + (userData?.rolId || userData?.RolId || 1)">
                {{ getRoleName(userData?.rolId || userData?.RolId || 1) }}
              </span>
            </div>
            <div class="detail-row">
              <label>Accede al Sistema:</label>
              <span class="value" [class]="(userData?.accedeAlSistema ?? userData?.AccedeAlSistema ?? true) ? 'status-active' : 'status-inactive'">
                <span [class]="(userData?.accedeAlSistema ?? userData?.AccedeAlSistema ?? true) ? 'pi pi-check-circle' : 'pi pi-times-circle'" aria-hidden="true"></span>
                {{ (userData?.accedeAlSistema ?? userData?.AccedeAlSistema ?? true) ? 'Sí' : 'No' }}
              </span>
            </div>
            <div class="detail-row" *ngIf="userData?.id || userData?.Id">
              <label>ID del Usuario:</label>
              <span class="value">{{ userData?.id || userData?.Id }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Sin datos -->
      <div class="modal-body no-data" *ngIf="!userData">
        <div class="empty-state">
          <span class="pi pi-exclamation-triangle" aria-hidden="true"></span>
          <p>No hay datos del usuario disponibles</p>
        </div>
      </div>

      <!-- Footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="onClose()">
          <span class="pi pi-times" aria-hidden="true"></span>
          Cerrar
        </button>
      </div>
    </div>
  </div>
</div>
