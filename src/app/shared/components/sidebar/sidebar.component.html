<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400&display=swap" rel="stylesheet">

<!-- Topbar Component -->
<app-topbar
  [isLoggedIn]="isLoggedIn"
  [isSmallScreen]="isSmallScreen"
  [userEmail]="userEmail"
  [displayEmail]="displayEmail"
  [userLegajo]="userLegajo"
  [displayLegajo]="displayLegajo"
  [userRole]="displayRole"
  [displayRole]="displayRole"
  [userLabel]="displayUserLabel"
  (perfilModalToggled)="onPerfilModalToggled($event)"
  (homeNavigation)="navigateToHome()"
  (logoutRequested)="confirmLogout()"
  (sidebarToggled)="toggleSidebar()">
</app-topbar>

<!-- Sidebar -->
<div *ngIf="isLoggedIn">
  <div class="sidebar" [ngClass]="{'hidden': !isSidebarVisible, 'visible': isSidebarVisible}">

    <!-- Logo -->
    <div class="sidebar-img">
      <img src="assets/images/logos/logo.png" alt="Logo" (click)="navigateToHome()">
    </div>

    <!-- Lista de menús principales -->
    <ul class="nav flex-column">
      <li *ngFor="let menu of visibleMenuItems" class="nav-item">
        <!-- Enlace del menú principal -->
        <a class="nav-link" (click)="toggleSubMenu(menu)">
          <i class="{{ menu.icono }}"></i> <!-- Icono del menú principal -->
          <span>{{ menu.descripcion }}</span>
          <i class="arrow" [ngClass]="{'rotate': isMenuExpanded(menu)}"
              *ngIf="getSubMenus(menu).length > 0"></i>
        </a>

        <!-- Submenús -->
        <ul [ngClass]="{'sub-menu': true, 'expanded': isMenuExpanded(menu)}"
            *ngIf="getSubMenus(menu).length > 0">
          <li *ngFor="let subMenu of getSubMenus(menu)" class="nav-item">
            <a class="nav-link" [routerLink]="subMenu.link" routerLinkActive="active"
                (click)="navigateToSubMenu(subMenu)">
              <i class="{{ subMenu.icono }}" *ngIf="subMenu.icono"></i>
              <span>{{ subMenu.descripcion }}</span>
            </a>
          </li>
        </ul>
      </li>
    </ul>

    <!-- Botón de Logout eliminado del sidebar: ahora en dropdown de perfil -->

    <!-- Antes se usaba un modal local; ahora se usa SweetAlert2 desde JS global -->
  </div>
</div>

<!-- El contenido principal se renderiza en <router-outlet> dentro de .main-wrapper -->
<!-- Eliminado el contenedor vacío .main-content para evitar que ocupe espacio y empuje las vistas -->
