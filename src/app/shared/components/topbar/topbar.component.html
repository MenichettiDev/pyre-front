<!-- Topbar Component -->
<div class="top-bar" *ngIf="isLoggedIn">
  <!-- Layout para Desktop -->
  <div class="topbar-desktop" *ngIf="!isSmallScreen">
    <div class="topbar-center">
    </div>

    <div class="topbar-right">
      <div class="user-info">
        <!-- Mostrar Legajo y tipo de perfil (role) y un icono de Perfil separado -->
  <div class="user-email-pill" *ngIf="userLegajo || displayLegajo || userRole || displayRole">
          <i class="bi bi-person-badge email-icon" aria-hidden="true"></i>
          <span class="email-text legajo-text">{{ userLegajo || displayLegajo || '—' }}</span>
          <!-- Icono del rol colocado antes del texto para mejor lectura -->
          <span class="role-pill" *ngIf="userRole || displayRole">
            <i class="bi bi-shield-lock role-icon" aria-hidden="true"></i>
            <span class="role-text">{{ (displayRole || userRole) | titlecase }}</span>
          </span>
          <!-- Icono de perfil adicional eliminado para evitar redundancia; el icono circular abre el dropdown -->
        </div>
  <span class="profile-toggle" (click)="togglePerfilModal()" [ngbTooltip]="'Ver perfil y opciones'" container="body">
          <i class="bi bi-person-circle profile-icon"></i>
        </span>
        <!-- Dropdown de perfil -->
        <div class="profile-dropdown" *ngIf="isPerfilModalVisible">
          <ul>
            <li (click)="navigateToHome(); isPerfilModalVisible=false"><i class="bi bi-person me-2"></i> Perfil</li>
            <li (click)="confirmLogout()"><i class="bi bi-box-arrow-right me-2"></i> Cerrar Sesión</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Layout para Mobile -->
  <div class="topbar-mobile" *ngIf="isSmallScreen">
    <div class="topbar-left">
      <div class="logo-small">
        <img src="assets/images/logos/logo.png" alt="Logo" (click)="navigateToHome()">
      </div>
      <div class="hamburger-menu" (click)="toggleSidebar()">
        <i class="bi bi-list"></i>
      </div>
    </div>

    <div class="topbar-center">
      <h4 class="app-title">Sistema de Gestión</h4>
    </div>

    <div class="topbar-right">
        <div class="user-info">
  <div class="user-email-pill" *ngIf="userLegajo || displayLegajo || userRole || displayRole" [ngbTooltip]="pillTooltip" container="body">
          <i class="bi bi-person-badge email-icon" aria-hidden="true"></i>
          <span class="email-text legajo-text">{{ userLegajo || displayLegajo || '' }}</span>
          <span class="role-text" *ngIf="userRole || displayRole">{{ (displayRole || userRole) | titlecase }}</span>
          <!-- Icono de perfil adicional eliminado en mobile para evitar redundancia -->
        </div>
  <span class="profile-toggle" (click)="togglePerfilModal()" [ngbTooltip]="'Ver perfil y opciones'" container="body">
          <i class="bi bi-person-circle profile-icon"></i>
        </span>
      </div>
    </div>
  </div>
</div>
